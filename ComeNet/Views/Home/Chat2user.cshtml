@{
    ViewData["Title"] = "Chat";
}

<head>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/ComeNet.styles.css" asp-append-version="true" />
</head>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<div class="container">
    <div class="row">
        <div class="col-md-4 static">
            <div class="profile-card">
                <img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="user" class="profile-photo">
                <h5><a href="#" class="text-white">Sarah Cruiz</a></h5>
                <a href="#" class="text-white"><i class="fa fa-user"></i> 1,299 followers</a>
            </div><!--profile card ends-->
            <ul class="nav-news-feed">
                <li><i class="fa fa-list-alt icon1"></i><div><a href="https://localhost:7136/home/friends">My Newsfeed</a></div></li>
                <li><i class="fa fa-users icon2"></i><div><a href="#">People Nearby</a></div></li>
                <li><i class="fa fa-user icon3"></i><div><a href="#">Friends</a></div></li>
                <li><i class="fa fa-comments icon4"></i><div><a href="#">Messages</a></div></li>
                <li><i class="fa fa-picture-o icon5"></i><div><a href="#">Images</a></div></li>
                <li><i class="fa fa-video-camera icon6"></i><div><a href="#">Videos</a></div></li>
            </ul><!--news-feed links ends-->
            <div id="chat-block">
                <div class="title">Chat online</div>
                <ul class="online-users list-inline">
                    <li><a href="#" title="Linda Lohan"><img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="Sophia Lee"><img src="https://bootdey.com/img/Content/avatar/avatar6.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="John Doe"><img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="Alexis Clark"><img src="https://bootdey.com/img/Content/avatar/avatar5.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="James Carter"><img src="https://bootdey.com/img/Content/avatar/avatar4.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="Robert Cook"><img src="https://bootdey.com/img/Content/avatar/avatar3.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="Richard Bell"><img src="https://bootdey.com/img/Content/avatar/avatar2.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="Anna Young"><img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                    <li><a href="#" title="Julia Cox"><img src="https://bootdey.com/img/Content/avatar/avatar6.png" alt="user" class="img-responsive profile-photo"><span class="online-dot"></span></a></li>
                </ul>
            </div><!--chat block ends-->
        </div>
    </div>
</div>
<div>
    <p id="username"></p>
</div>
<body>
    <div>
        <section>
            <div class="container py-5">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-8 col-lg-6 col-xl-4" style="width:75%;margin-top:10%">
                        <div class="card" id="chat1" style="border-radius: 15px;">
                            <div class="card-header d-flex justify-content-between align-items-center p-3 bg-info text-white border-bottom-0"
                                 style="border-top-left-radius: 15px; border-top-right-radius: 15px;">
                                <i class="fas fa-angle-left"></i>
                                <p class="mb-0 fw-bold">Live chat</p>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="card-body">
                                <div class="form-outline">
                                    <div id="chat"></div>
                                    <textarea class="form-control" id="message" rows="4"></textarea>
                                    <button id="sendbutton" onclick="sendMessage()" class="sendMessage">Send</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
<div class="container" id="user-list">
    <div class="row">
        <div class="col-md-8">
            <div class="people-nearby">
            </div>
        </div>
    </div>
</div>

<style>
    body {
        margin-top: 20px;
        background: #FAFAFA;
    }
    /*==================================================
      Newsfeed Left Sidebar
      ==================================================*/

    /*Profile Card CSS*/

    .profile-card {
        background: linear-gradient(to bottom, rgba(39,170,225,.8), rgba(28,117,188,.8));
        background-size: cover;
        width: 100%;
        min-height: 90px;
        border-radius: 4px;
        padding: 10px 20px;
        color: #fff;
        margin-bottom: 40px;
    }

        .profile-card img.profile-photo {
            border: 7px solid #fff;
            float: left;
            margin-right: 20px;
            position: relative;
            top: -30px;
            height: 70px;
            width: 70px;
            border-radius: 50%;
        }

        .profile-card h5 a {
            font-size: 15px;
        }

        .profile-card a {
            font-size: 12px;
        }

    /*Newsfeed Links CSS*/

    ul.nav-news-feed {
        padding-left: 20px;
        padding-right: 20px;
        margin: 0 0 40px 0;
        background: #fff;
        padding-top: 20px;
    }

        ul.nav-news-feed li {
            list-style: none;
            display: block;
            padding: 15px 0;
        }

            ul.nav-news-feed li div {
                position: relative;
                margin-left: 30px;
            }

                ul.nav-news-feed li div::after {
                    content: "";
                    width: 100%;
                    height: 1px;
                    border-top: 1px solid #f1f2f2;
                    position: absolute;
                    bottom: -15px;
                    left: 0;
                }

            ul.nav-news-feed li a {
                color: #6d6e71;
            }

            ul.nav-news-feed li i {
                font-size: 18px;
                margin-right: 15px;
                float: left;
            }

        ul.nav-news-feed i.icon1 {
            color: #8dc63f;
        }

        ul.nav-news-feed i.icon2 {
            color: #662d91;
        }

        ul.nav-news-feed i.icon3 {
            color: #ee2a7b;
        }

    ul.nav-news-fee i.icon4 {
        color: #f7941e;
    }

    ul.nav-news-fee i.con5 {
        color: #1c75bc;
    }

    ul.nav-news-feed i.icon6 {
        color: #9e1f63;
    }

    /*Chat Block CSS*/

    #chat-block {
        margin: 0 0 40px 0;
        text-align: center;
        background: #fff;
        padding-top: 20px;
    }

        #chat-block .title {
            background: #8dc63f;
            padding: 2px 20px;
            width: 70%;
            height: 30px;
            border-radius: 15px;
            position: relative;
            margin: 0 auto 20px;
            color: #fff;
            font-size: 14px;
            font-weight: 600;
        }

    ul.online-users {
        padding-left: 20px;
        padding-right: 20px;
        text-align: center;
        margin: 0;
    }

        ul.online-users li {
            list-style: none;
            position: relative;
            margin: 3px auto !important;
            padding-left: 2px;
            padding-right: 2px;
        }

            ul.online-users li span.online-dot {
                background: linear-gradient(to bottom, rgba(141,198,63, 1), rgba(0,148,68, 1));
                border: none;
                height: 12px;
                width: 12px;
                border-radius: 50%;
                position: absolute;
                bottom: -6px;
                border: 2px solid #fff;
                left: 0;
                right: 0;
                margin: auto;
            }

    img.profile-photo {
        height: 58px;
        width: 58px;
        border-radius: 50%;
    }

    ul.online-users {
        padding-left: 20px;
        padding-right: 20px;
        text-align: center;
        margin: 0;
    }

    .list-inline {
        padding-left: 0;
        margin-left: -5px;
        list-style: none;
    }

        .list-inline > li {
            display: inline-block;
            padding-right: 5px;
            padding-left: 5px;
        }

    .text-white {
        color: #fff;
    }

    #chat1 .form-outline .form-control ~ .form-notch div {
        pointer-events: none;
        border: 1px solid;
        border-color: #eee;
        box-sizing: border-box;
        background: transparent;
    }

    #chat1 .form-outline .form-control ~ .form-notch .form-notch-leading {
        left: 0;
        top: 0;
        height: 100%;
        border-right: none;
        border-radius: .65rem 0 0 .65rem;
    }

    #chat1 .form-outline .form-control ~ .form-notch .form-notch-middle {
        flex: 0 0 auto;
        max-width: calc(100% - 1rem);
        height: 100%;
        border-right: none;
        border-left: none;
    }

    #chat1 .form-outline .form-control ~ .form-notch .form-notch-trailing {
        flex-grow: 1;
        height: 100%;
        border-left: none;
        border-radius: 0 .65rem .65rem 0;
    }

    #chat1 .form-outline .form-control:focus ~ .form-notch .form-notch-leading {
        border-top: 0.125rem solid #39c0ed;
        border-bottom: 0.125rem solid #39c0ed;
        border-left: 0.125rem solid #39c0ed;
    }

    #chat1 .form-outline .form-control:focus ~ .form-notch .form-notch-leading,
    #chat1 .form-outline .form-control.active ~ .form-notch .form-notch-leading {
        border-right: none;
        transition: all 0.2s linear;
    }

    #chat1 .form-outline .form-control:focus ~ .form-notch .form-notch-middle {
        border-bottom: 0.125rem solid;
        border-color: #39c0ed;
    }

    #chat1 .form-outline .form-control:focus ~ .form-notch .form-notch-middle,
    #chat1 .form-outline .form-control.active ~ .form-notch .form-notch-middle {
        border-top: none;
        border-right: none;
        border-left: none;
        transition: all 0.2s linear;
    }

    #chat1 .form-outline .form-control:focus ~ .form-notch .form-notch-trailing {
        border-top: 0.125rem solid #39c0ed;
        border-bottom: 0.125rem solid #39c0ed;
        border-right: 0.125rem solid #39c0ed;
    }

    #chat1 .form-outline .form-control:focus ~ .form-notch .form-notch-trailing,
    #chat1 .form-outline .form-control.active ~ .form-notch .form-notch-trailing {
        border-left: none;
        transition: all 0.2s linear;
    }

    #chat1 .form-outline .form-control:focus ~ .form-label {
        color: #39c0ed;
    }

    #chat1 .form-outline .form-control ~ .form-label {
        color: #bfbfbf;
    }

    .sendMessage {
        margin-left: 85%;
        margin-top: 2%;
    }


    body {
        margin-top: 20px;
        background: #FAFAFA;
    }
    /*==================================================
              Nearby People CSS
              ==================================================*/

    .people-nearby .google-maps {
        background: #f8f8f8;
        border-radius: 4px;
        border: 1px solid #f1f2f2;
        padding: 20px;
        margin-bottom: 20px;
    }

        .people-nearby .google-maps .map {
            height: 300px;
            width: 100%;
            border: none;
        }

    .people-nearby .nearby-user {
        padding: 20px 0;
        border-top: 1px solid #f1f2f2;
        border-bottom: 1px solid #f1f2f2;
        margin-bottom: 20px;
    }

    img.profile-photo-lg {
        height: 80px;
        width: 80px;
        border-radius: 50%;
    }


    .video {
        border: solid red;
    }
</style>


<script>
    
    function sendMessage() 
    {
       

        /////發送邀請api

        var username = document.getElementById('username');
        var content = username.textContent;
        console.log(content); 

        const message = $("#message").val();

        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");

        var rawvideo = JSON.stringify({
            "name": content,
            "message": message,
            "userId": "19",
        });
        var requestvideo = {
            method: 'POST',
            headers: myHeaders,
            body: rawvideo,
            redirect: 'follow'
        };

        fetch("https://localhost:7136/api/users/ChatToSpecificUser", requestvideo)
            .then(response => response.json())
            .then(result => {
                if (result.userId != null) 
                {
                    console.log(result.userId);
                }
                else
                {
                    alert('請稍等');
                }

            })
            .catch(error => console.log('error', error));




        $("#message").val("");


    }

</script>

