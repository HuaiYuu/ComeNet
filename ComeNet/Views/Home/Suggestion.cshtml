@{
    var name = ViewBag.name;
    var id = ViewBag.id;
    ViewData["Title"] = "Suggestion";
}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<div id="remainingTime"></div>
<style>
    
    #remainingTime {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-weight: bold; 
        background-color: papayawhip;
        padding: 10px; 
    }
</style>
<div class="container bootstrap snippets bootdey">
    <div id="suggestion" class="row">         
    </div>
</div>

<style>
    .suggestion{
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }
    body {
        margin-top: 20px;
    }

    .p-lg {
        padding: 30px;
    }

    .lazur-bg {
        background-color: #23c6c8;
        color: #ffffff;
    }

    .red-bg {
        background-color: #ed5565;
        color: #ffffff;
    }

    .navy-bg {
        background-color: #1ab394;
        color: #ffffff;
    }

    .yellow-bg {
        background-color: #f8ac59;
        color: #ffffff;
    }

    .widget-head-color-box {
        border-radius: 5px 5px 0px 0px;
        margin-top: 10px;
    }

    .m-b-md {
        margin-bottom: 20px;
        height:100px;
        width:100px;
    }

    .no-margins {
        margin: 0 !important;
    }

    .font-bold {
        font-weight: 600;
    }

    img.circle-border {
        border: 6px solid #FFFFFF;
        border-radius: 50%;
    }

    .widget-text-box {
        padding: 20px;
        border: 1px solid #e7eaec;
        background: #ffffff;
    }

    .media-heading {
        margin-top: 0;
        margin-bottom: 5px;
    }
                </style>


<script>    
    callApiAtEight();
    function callApiAtEight()
    {
        
            var myHeaders = new Headers();

            myHeaders.append("Content-Type", "application/json");

            var raw = JSON.stringify({
                "userid": @id,
            });
            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
            };

            fetch("https://localhost:7136/api/users/GetSuggestionFriend", requestOptions)
                .then(response => response.json())
                .then(data => {
                    const teamMembersContainer = document.getElementById('suggestion');
                    data.forEach(member => {

                    const memberHtml = `<div class="col-md-5 suggestion">
                    <div class="widget-head-color-box lazur-bg p-lg text-center">
                        <div class="m-b-md">
                            <h2 class="font-bold no-margins">
                                    ${member.name}
                            </h2>
                            <small>Founder of Mysite</small>
                        </div>
                            <img src="${member.picture}" class="img-circle circle-border m-b-md" alt="profile">
                        <div>
                            <span>100 Tweets</span> |
                            <span>350 Following</span> |
                            <span>610 Followers</span>
                        </div>
                    </div>
                    <div class="widget-text-box">
                        <h4 class="media-heading">Alex Smith</h4>
                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                        <div class="text-right">
                            <a class="btn btn-xs btn-default"><i class="fa fa-thumbs-up"></i> Like </a>
                            <a class="btn btn-xs btn-primary"><i class="fa fa-heart"></i> Love</a>
                            <a class="btn btn-xs btn-success"><i class="fa fa fa-envelope"></i> Message</a>
                            <a class="btn btn-xs btn-info"><i class="fa fa fa-phone"></i> Call</a>
                        </div>
                    </div>
                </div>
                                  `

                        teamMembersContainer.innerHTML += memberHtml;
                    });
                })
                .catch(error => {
                    console.error('Error fetching team member data:', error);
                });
            
        
    }
</script>
<script>
    function updateRemainingTime()
    {
        
        var currentTime = new Date();
        var eightPM = new Date();
        eightPM.setHours(20, 0, 0, 0); //  20:00:00

        var timeDiff = eightPM - currentTime;

        if (timeDiff > 0) 
        {
            
            var hours = Math.floor(timeDiff / (1000 * 60 * 60));
            var minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
            var timeUntilEight = hours + "小時 " + minutes + "分鐘 " + seconds + "秒";

            document.getElementById("remainingTime").textContent = "距離下次抽卡時間：" + timeUntilEight;
        } else 
        {            
            callApiAtEight();
        }
    }

    setInterval(updateRemainingTime, 1000);

    
    updateRemainingTime();
</script>