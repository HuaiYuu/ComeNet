@{
    var name = ViewBag.name;
    var id = ViewBag.id;
    ViewData["Title"] = "Card";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.0.7/css/boxicons.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css" integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=" crossorigin="anonymous" />
<div style="margin-top:-8%" id="remainingTime"></div>
<div style="margin-top:25%;margin-left:40%;width:100%; " class="limtform">
    <div class="row row-cols-1 row-cols-lg-2 row-cols-xl-4">
        <div id="toollist" class="col">
            <div class="card radius-15 bg-primary">
                <div class="card-body text-center">
                    <div class="p-4 radius-15">
                        <img src="https://bootdey.com/img/Content/avatar/avatar1.png" width="110" height="110" class="rounded-circle shadow p-1 bg-white" alt="">
                        <h5 id="toolname" class="mb-0 mt-5 text-white">解鎖五張用戶卡</h5>
                        <p class="mb-3 text-white"></p>
                        <div class="list-inline contacts-social mt-3 mb-3">
                        </div>
                        <div class="d-grid">
                            <a id="get" class="btn btn-white radius-15">領取</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<style>

    .fa-spinner {
        font-size: 100px;
        margin-left: 45%;
    }

    .hidden {
        display: none;
    }

    #remainingTime {
        position: absolute;
        top: 30%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-weight: bold;
        background-color: papayawhip;
        padding: 10px;
    }

    #limtform {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-weight: bold;
        background-color: papayawhip;
        padding: 10px;
        margin-top: 15%;
    }
</style>
<style>
    body {
        background-color: #f7f7ff;
        margin-top: 20px;
    }

    .btn-white {
        background-color: #fff;
        border-color: #e7eaf3;
    }

    .radius-15 {
        border-radius: 15px;
    }

    .contacts-social a {
        font-size: 16px;
        width: 36px;
        height: 36px;
        line-height: 36px;
        background: #ffffff;
        border: 1px solid #eeecec;
        text-align: center;
        border-radius: 50%;
        color: #2b2a2a;
    }

    .bg-info {
        background-color: #0dcaf0 !important;
    }

    .bg-primary {
        background-color: #008cff !important;
    }

    .bg-danger {
        background-color: #fd3550 !important;
    }

    .bg-warning {
        background-color: #ffc107 !important;
    }
</style>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
<script>
    
    

    document.addEventListener("DOMContentLoaded", function () 
    {
        var getButton = document.getElementById("get");
        getButton.addEventListener("click", function ()
        {
            
          

        });
    });

    var myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");
    var raw = JSON.stringify({
        "userid": @id,
    });
    var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: raw,
        redirect: 'follow'
    };

    fetch("https://localhost:7136/api/users/GetToollist", requestOptions)
        .then(response => response.json())
        .then(data => {
            const teamMembersContainer = document.getElementById('toollist');

            data.forEach(member => {

                const memberHtml = `<div class="card radius-15 bg-primary">
                            <div class="card-body text-center">
                                <div class="p-4 radius-15">
                                    <img src="https://bootdey.com/img/Content/avatar/avatar1.png" width="110" height="110" class="rounded-circle shadow p-1 bg-white" alt="">
                                    <h5 id="toolname" class="mb-0 mt-5 text-white">${member.toolname}</h5>
                                        <p class="mb-3 text-white">${member.number}張</p>
                                    <div class="list-inline contacts-social mt-3 mb-3">
                                    </div>
                                    <div class="d-grid">
                                        <a id="get" class="btn btn-white radius-15">使用</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                                      `

                teamMembersContainer.innerHTML += memberHtml;

            });
            loadingContainer.classList.add('hidden');
        })
        .catch(error => {
            console.error('Error fetching team member data:', error);
        });
    


</script>

